<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ä—Ç–∞ —Å–æ–±—ã—Ç–∏–π –≥–æ—Ä–æ–¥–∞</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Flatpickr CSS for calendar -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-map-marked-alt"></i> –°–æ–±—ã—Ç–∏—è –≥–æ—Ä–æ–¥–∞</h1>
                <p class="subtitle">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</p>
            </div>
            
            <!-- –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º -->
            <div class="panel">
                <h3><i class="fas fa-calendar-alt"></i> –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ</h3>
                <div class="date-filter-container">
                    <input type="text" id="dateRangePicker" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç" readonly>
                    <button id="clearDateFilter" class="clear-btn" title="–û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="quick-dates">
                    <button class="quick-date-btn" data-filter="today">–°–µ–≥–æ–¥–Ω—è</button>
                    <button class="quick-date-btn" data-filter="tomorrow">–ó–∞–≤—Ç—Ä–∞</button>
                    <button class="quick-date-btn" data-filter="week">–ù–µ–¥–µ–ª—è</button>
                    <button class="quick-date-btn" data-filter="month">–ú–µ—Å—è—Ü</button>
                </div>
            </div>
            
            <!-- –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–±–æ—Ä–æ–º -->
            <div class="panel">
                <h3><i class="fas fa-filter"></i> –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É</h3>
                <div class="multiselect-container">
                    <div class="multiselect-header" id="typeFilterHeader">
                        <span class="selected-text">–í—Å–µ —Å–æ–±—ã—Ç–∏—è</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="multiselect-dropdown" id="typeFilterDropdown">
                        <label class="checkbox-label">
                            <input type="checkbox" value="concert" class="event-type-checkbox">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">üéµ –ö–æ–Ω—Ü–µ—Ä—Ç—ã</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="theater" class="event-type-checkbox">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">üé≠ –¢–µ–∞—Ç—Ä</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="exhibition" class="event-type-checkbox">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">üñºÔ∏è –í—ã—Å—Ç–∞–≤–∫–∏</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="sport" class="event-type-checkbox">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">‚öΩ –°–ø–æ—Ä—Ç</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="festival" class="event-type-checkbox">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">üé™ –§–µ—Å—Ç–∏–≤–∞–ª–∏</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="repair" class="event-type-checkbox">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">üöß –†–µ–º–æ–Ω—Ç—ã</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="accident" class="event-type-checkbox">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">üöó –î–¢–ü</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="city_event" class="event-type-checkbox">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">üèõÔ∏è –ì–æ—Ä–æ–¥—Å–∫–∏–µ</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- –§–∏–ª—å—Ç—Ä –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É -->
            <div class="panel">
                <h3><i class="fas fa-database"></i> –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö</h3>
                <div class="multiselect-container">
                    <div class="multiselect-header" id="sourceFilterHeader">
                        <span class="selected-text">–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="multiselect-dropdown" id="sourceFilterDropdown">
                        <label class="checkbox-label">
                            <input type="checkbox" value="yandex_afisha" class="source-checkbox">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">üì∞ –Ø–Ω–¥–µ–∫—Å.–ê—Ñ–∏—à–∞</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="manual" class="source-checkbox">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">‚úçÔ∏è –†—É—á–Ω–æ–π –≤–≤–æ–¥</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="telegram" class="source-checkbox">
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">üì± Telegram</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- –í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞ -->
            <div class="panel">
                <h3><i class="fas fa-city"></i> –í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞</h3>
                <select id="citySelect" class="styled-select">
                    <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                </select>
            </div>
            
            
            <!-- –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö -->
            <div class="panel">
                <h3><i class="fas fa-download"></i> –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                <button onclick="importFromKudaGo()" class="import-btn kudago-btn">
                    <i class="fas fa-calendar-alt"></i> KudaGo
                </button>
                <button onclick="importFromYandex()" class="import-btn yandex-btn">
                    <i class="fas fa-newspaper"></i> –Ø–Ω–¥–µ–∫—Å.–ê—Ñ–∏—à–∞
                </button>
                <button onclick="importTestMoscow()" class="import-btn test-btn">
                    <i class="fas fa-flask"></i> –¢–µ—Å—Ç (–ú–æ—Å–∫–≤–∞)
                </button>
            </div>
            
            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div id="results" class="results"></div>
        </div>
        
        <!-- –ö–∞—Ä—Ç–∞ -->
        <div class="map-container">
            <div id="map"></div>
            <div class="map-overlay">
                <div class="stats-badge" id="eventCount">
                    <i class="fas fa-calendar-check"></i>
                    <span>0 —Å–æ–±—ã—Ç–∏–π</span>
                </div>
            </div>
            <!-- –í—ã–±–æ—Ä —Å—Ç–∏–ª—è –∫–∞—Ä—Ç—ã -->
            <div class="map-style-selector">
                <button class="map-style-btn" id="mapStyleToggle" title="–°–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª—å –∫–∞—Ä—Ç—ã">
                    <i class="fas fa-layer-group"></i>
                </button>
                <div class="map-style-dropdown" id="mapStyleDropdown">
                    <button class="style-option" data-style="osm">
                        <i class="fas fa-map"></i>
                        <span>OpenStreetMap</span>
                    </button>
                    <button class="style-option" data-style="dark">
                        <i class="fas fa-moon"></i>
                        <span>Dark Matter</span>
                    </button>
                    <button class="style-option" data-style="light">
                        <i class="fas fa-sun"></i>
                        <span>Positron</span>
                    </button>
                    <button class="style-option" data-style="satellite">
                        <i class="fas fa-satellite"></i>
                        <span>–°–ø—É—Ç–Ω–∏–∫</span>
                    </button>
                    <button class="style-option" data-style="toner">
                        <i class="fas fa-adjust"></i>
                        <span>Toner (—á/–±)</span>
                    </button>
                    <button class="style-option" data-style="terrain">
                        <i class="fas fa-mountain"></i>
                        <span>Terrain</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
    
    <!-- Custom JS -->
    <script src="js/api.js"></script>
    <script src="js/eventCache.js"></script>
    <script src="js/map.js"></script>
</body>
</html>